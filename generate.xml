<?xml version="1.0"?>

<project name="ptbiz-rmi" default="all" basedir=".">
	
	<property name="output.dir" value="${basedir}/build"/>
	<property name="classes.dir" value="${output.dir}/classes"/>

	<property name="src" value="${basedir}/src"/>
	<property name="config" value="${basedir}/etc/config"/>
	<property name="lib.project" value="${basedir}/lib"/>
	
	<property name="dist.dir" value="${basedir}/dist"/>
	<property name="lib.dest" value="${dist.dir}/lib"/>
	
	<property name="javadoc.dest" value="${basedir}/../javadoc"/>

	<property name="generation.output" value="${basedir}/generated"/>	
	
	<!--
		build classpath
	-->
	<path id="classpath.build">
		<pathelement path="${classes.dir}"/>
		<fileset dir="${lib.project}">
			<include name="**/*.jar"/>
		</fileset>
	</path>

	<taskdef name="asg-generate" classname="net.anotheria.asg.ant.GenerateTask">
		<classpath refid="classpath.build"/>
	</taskdef>

	<target name="clean">
		<delete dir="${output.dir}"/>
		<delete dir="${generation.output}"/>
	</target>

	<target name="prepare">
		<mkdir dir="${generation.output}"/>
		<mkdir dir="${classes.dir}"/>
	</target>
	

	
	<target name="generate" depends="prepare">
		<asg-generate
			outputDir="${generation.output}"
			baseDir="${basedir}"
		/>
	</target>

	<target name="compile.g" depends="">
		<javac destdir="${classes.dir}" srcdir="${generation.output}" debug="on" deprecation="off" optimize="on">
			<classpath>
				<fileset dir="${lib.project}"> 
					<include name="**/*.jar"/>
				</fileset>
			</classpath>
		</javac>
	</target>

	<target name="compile" depends="prepare">
		<javac destdir="${classes.dir}" srcdir="${src}" debug="on" deprecation="off" optimize="on">
			<classpath>
				<fileset dir="${lib.project}">
					<include name="**/*.jar"/>
				</fileset>
			</classpath>
		</javac>
	</target>

	<target name="all" depends="generate,compile.g,compile"/>
	<target name="build" depends="all"/>
	
</project>
