<?xml version="1.0"?>

<project name="CreatApplication" default="createApp" basedir=".">
	
	<property name="metaproject.dir" value="${basedir}/metaproject"/>
	
	<target name="createApp" depends="info,create.app"/>
	
	<target name="info">
		<echo>############################################################################</echo>
		<echo>#                                                                          #</echo>
		<echo>#                          ANOTHERIA.NET                                   #</echo>
		<echo>#                                                                          #</echo>
		<echo>#  Creating new web application from scratch                               #</echo>
		<echo>#                                                                          #</echo>
		<echo>#                                                                          #</echo>
		<echo>#                                                                          #</echo>
		<echo>#                                                                          #</echo>
		<echo>#                                                                          #</echo>
		<echo>#                                                                          #</echo>
		<echo>############################################################################</echo>
		<echo/>
		<echo/>
		<echo/>
	</target>
	
	<target name="create.app" depends="config.app,copy.app"/>
	
	<target name="config.app">
		<input addproperty="app.name">###### Please enter application name:</input>
		<!--
		<input addproperty="app.owner" defaultvalue="${applicationName}">###### Please enter application owner:</input>
		-->
		<property name="app.owner" value="anothereria"/>
		<input addproperty="app.URLPath" defaultvalue="${app.name}">###### Please enter application URL path:</input>
		<property name="newproject.dir" value="${basedir}/../${app.name}"/>
	</target>
	
	<target name="copy.app">
		<filter token="applicationName" value="${app.name}"/>
		<filter token="applicationOwner" value="${app.owner}"/>
		<filter token="applicationURLPath" value="${app.URLPath}"/>
		<echo>CREATING APPLICATION: create base project structure</echo>
		<copy toDir="${newproject.dir}" filtering="true">
			<fileset dir="${metaproject.dir}">
				<exclude name="metajava/"/>
				<exclude name="metadata/"/>
			</fileset>
		</copy>
		<echo>CREATING APPLICATION: creat base sources files</echo>
		<copy toDir="${newproject.dir}/java/net/anotheria/${app.name}" filtering="true">
			<fileset dir="${metaproject.dir}/metajava"/>
		</copy>
		<echo>CREATING APPLICATION: create base web data</echo>
		<copy toDir="/work/data/${app.name}">
			<fileset dir="${metaproject.dir}/metadata"/>
		</copy>
	</target>

	
</project>